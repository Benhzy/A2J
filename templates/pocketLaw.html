<!DOCTYPE html>
<html>
<head>
	<title>PocketLaw</title>
	<!-- Bootstrap CSS -->
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.3/font/bootstrap-icons.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
	<!-- <link rel="stylesheet" href="style.css"> -->
</head>
<body>

    <div class="container-fluid">
        <div class="row">
          <div class="col-3 sidebar">
            <h3 id="sidebar title">Historical Chats</h3>
            <btn class="btn" id="new-chat">New Chat</btn>
            <ul class="nav nav-pills flex-column mb-auto" id="chat-list">
              <li class="nav-link">Chat 1</li>
            </ul>
          </div>
          

          <div class="col chat-area"> 
            <div class="welcome-message">Welcome. <br> How can PocketLaw help you?</div>
            <div class="chat-messages" id = "chatbox"></div>
            <div class="chat-input fixed-bottom">
                <div id="userInput">
                  <input type="text" placeholder="Type your message..." id="msg" name ="msg">
                </div>
                <script>
                  function getBotResponse() {
                    var rawText = $("#chat-messages").val();
                    var userHtml = '<p class="message"><span>' + rawText + "</span></p>";
                    $("#textInput").val("");
                    $("#chatbox").append(userHtml);
                    document
                      .getElementById("userInput")
                      .scrollIntoView({ block: "start", behavior: "smooth" });
                    $.get("/get", { msg: rawText }).done(function(data) {
                      var botHtml = '<p class="message"><span>' + data + "</span></p>";
                      $("#chatbox").append(botHtml);
                      document
                        .getElementById("userInput")
                        .scrollIntoView({ block: "start", behavior: "smooth" });
                    });
                  }
                  $("#textInput").keypress(function(e) {
                    if (e.which == 13) {
                      getBotResponse();
                    }
                  });
                </script>
               <button type='submit' id="send-btn" class="bi-send"></button>
              
              <button id="record-btn" class="bi bi-mic-fill"></button>
              
            </div>
          </div>
        </div>
      </div>
	<!-- Bootstrap JavaScript -->
	<!-- <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.2/js/bootstrap.min.js"></script> -->
  <script>
    const chatInput = document.querySelector('.chat-input input');
    const sendButton = document.querySelector('#send-btn');
    const chatMessages = document.querySelector('.chat-messages');
    const createChat = document.querySelector('#new-chat');
    var chatMsgID = 1;

    function addChat() {
      var ul = document.getElementById('chat-list');
      var li = document.createElement('li');
      chatMsgID++;
      var sibs = ul.children;
      for(let sib of sibs) {
        sib.classList.remove('active')
        }
      li.appendChild(document.createTextNode('Chat '+chatMsgID));
      li.classList.add('nav-link');
      li.classList.add('active');
      ul.append(li);
    }
    createChat.addEventListener('click',addChat);


</script>

</body>
</html>

